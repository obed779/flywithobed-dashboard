
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>✈️ FlyWithObed Live Aviator Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body class="bg-gray-900 text-white font-sans">

  <div class="grid grid-cols-5 grid-rows-[auto_1fr_auto] h-screen gap-3 p-4">
    
    <!-- Left: History -->
    <div class="col-span-1 bg-gray-800 rounded-2xl p-4 overflow-y-auto">
      <h2 class="text-lg font-bold mb-3">📈 History</h2>
      <ul id="history" class="space-y-2 text-sm"></ul>
    </div>

    <!-- Center: Flight + Chat -->
    <div class="col-span-3 bg-gray-800 rounded-2xl p-4 flex flex-col items-center justify-between">
      <div class="text-center">
        <h1 class="text-2xl font-bold">✈️ FlyWithObed Aviator</h1>
        <p id="round" class="text-gray-400 mt-1">Waiting for next round...</p>
      </div>

      <!-- Plane Animation -->
      <div id="plane" class="text-6xl mt-10 transition-transform duration-500">🛩️</div>
      <p id="multiplier" class="text-3xl font-bold mt-4 text-green-400">1.00x</p>

      <!-- Live Chat -->
      <div class="w-full bg-gray-700 p-2 rounded-lg mt-8 flex-1 flex flex-col">
        <div id="chat-box" class="flex-1 overflow-y-auto text-sm space-y-1 mb-2"></div>
        <div class="flex">
          <input id="chat-input" class="flex-1 p-2 bg-gray-800 rounded-l-lg outline-none" placeholder="Type message..." />
          <button id="send-chat" class="bg-blue-600 px-4 rounded-r-lg">Send</button>
        </div>
      </div>
    </div>

    <!-- Right: Balances -->
    <div class="col-span-1 bg-gray-800 rounded-2xl p-4">
      <h2 class="text-lg font-bold mb-3">💰 Balances</h2>
      <div class="mb-3">
        👨‍✈️ <span class="font-semibold">Player A:</span>
        <span id="balanceA">$1000.00</span>
      </div>
      <div>
        🧑‍✈️ <span class="font-semibold">Player B:</span>
        <span id="balanceB">$1000.00</span>
      </div>
    </div>

    <!-- Bottom: Betting Area -->
    <div class="col-span-5 flex justify-around bg-gray-800 rounded-2xl p-4">
      <div class="flex flex-col items-center space-y-2">
        <h3 class="font-semibold">👨‍✈️ Player A</h3>
        <input id="betA" type="number" placeholder="Bet amount" class="bg-gray-700 p-2 rounded text-center w-32" />
        <button id="betA-btn" class="bg-green-600 px-4 py-1 rounded">Bet</button>
        <button id="cashoutA-btn" class="bg-yellow-500 px-4 py-1 rounded">Cashout</button>
      </div>

      <div class="flex flex-col items-center space-y-2">
        <h3 class="font-semibold">🧑‍✈️ Player B</h3>
        <input id="betB" type="number" placeholder="Bet amount" class="bg-gray-700 p-2 rounded text-center w-32" />
        <button id="betB-btn" class="bg-green-600 px-4 py-1 rounded">Bet</button>
        <button id="cashoutB-btn" class="bg-yellow-500 px-4 py-1 rounded">Cashout</button>
      </div>
    </div>
  </div>

  <script>
    const socket = io("https://obedaviator.onrender.com");

    const plane = document.getElementById("plane");
    const multiplierEl = document.getElementById("multiplier");
    const historyEl = document.getElementById("history");
    const chatBox = document.getElementById("chat-box");
    const chatInput = document.getElementById("chat-input");
    const sendChat = document.getElementById("send-chat");
    const balanceA = document.getElementById("balanceA");
    const balanceB = document.getElementById("balanceB");
    const roundEl = document.getElementById("round");

    let multiplier = 1.00;
    let flying = false;

    // --- SOCKET EVENTS ---
    socket.on("connect", () => console.log("✅ Connected to Aviator Server"));
    socket.on("roundStart", (data) => {
      flying = true;
      multiplier = 1.00;
      roundEl.textContent = `🛫 Round ${data.round} started — flying...`;
      plane.style.transform = "translateX(0px)";
      multiplierEl.textContent = "1.00x";
    });

    socket.on("roundUpdate", (data) => {
      multiplier = data.multiplier;
      multiplierEl.textContent = `${multiplier.toFixed(2)}x`;
      plane.style.transform = `translateX(${multiplier * 20}px)`;
    });

    socket.on("roundEnd", (data) => {
      flying = false;
      multiplierEl.textContent = `💥 Crashed at ${data.crashPoint.toFixed(2)}x`;
      plane.style.transform = "translateX(0px)";
      const li = document.createElement("li");
      li.textContent = `Round ${data.round}: ${data.crashPoint.toFixed(2)}x`;
      historyEl.prepend(li);
    });

    socket.on("chatMessage", (msg) => {
      const p = document.createElement("p");
      p.textContent = msg;
      chatBox.appendChild(p);
      chatBox.scrollTop = chatBox.scrollHeight;
    });

    sendChat.onclick = () => {
      const msg = chatInput.value.trim();
      if (!msg) return;
      socket.emit("chatMessage", msg);
      chatInput.value = "";
    };

    socket.on("balanceUpdate", (data) => {
      if (data.player === "A") balanceA.textContent = `$${data.balance.toFixed(2)}`;
      if (data.player === "B") balanceB.textContent = `$${data.balance.toFixed(2)}`;
    });

    // Bet & Cashout actions
    document.getElementById("betA-btn").onclick = () => {
      const amount = parseFloat(document.getElementById("betA").value);
      if (amount > 0) socket.emit("bet", { player: "A", amount });
    };
    document.getElementById("cashoutA-btn").onclick = () => socket.emit("cashout", { player: "A" });

    document.getElementById("betB-btn").onclick = () => {
      const amount = parseFloat(document.getElementById("betB").value);
      if (amount > 0) socket.emit("bet", { player: "B", amount });
    };
    document.getElementById("cashoutB-btn").onclick = () => socket.emit("cashout", { player: "B" });
  </script>

</body>
</html>

        
