<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  const statusEl = document.getElementById("status");
  const historyBody = document.getElementById("historyBody");

  // ✅ Connect to your live backend
  const socket = io("https://obedaviator.onrender.com", {
    transports: ["websocket"],
    reconnection: true,
    reconnectionAttempts: 5,
  });

  // ✅ On connection
  socket.on("connect", () => {
    statusEl.textContent = "✅ Connected to Aviator Live — Waiting for next round...";
  });

  // ✅ Listen for new flight updates from server.js
  socket.on("flight_update", (data) => {
    const { crashPoint } = data;
    const round = new Date().toLocaleTimeString();

    const row = document.createElement("tr");
    row.innerHTML = `<td>${round}</td><td>${crashPoint}x</td>`;
    historyBody.prepend(row);

    statusEl.textContent = `✈️ Flight crashed at ${crashPoint}x`;
  });

  // ✅ Connection errors
  socket.on("connect_error", (err) => {
    statusEl.textContent = "❌ Disconnected. Reconnecting...";
    console.error("Connection error:", err);
  });
</script>


