<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlyWithObed Live Aviator Dashboard</title>
  <style>
    body {
      background: radial-gradient(circle at top, #002244, #000);
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      margin-top: 20px;
      color: #00e0ff;
    }
    .plane {
      font-size: 60px;
      transition: transform 0.2s ease-out;
      margin-top: 40px;
    }
    .stats {
      margin-top: 20px;
      font-size: 20px;
    }
    .bet-section {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
    }
    .player {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 20px;
      width: 200px;
    }
    button {
      background: #00e0ff;
      color: #000;
      font-weight: bold;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      margin-top: 10px;
      cursor: pointer;
    }
    table {
      margin: 40px auto;
      width: 80%;
      border-collapse: collapse;
      color: #ccc;
    }
    th, td {
      border-bottom: 1px solid #333;
      padding: 10px;
    }
    th {
      color: #00e0ff;
    }
  </style>
</head>
<body>
  <h1>âœˆï¸ FlyWithObed Live Aviator Dashboard</h1>
  <div class="plane" id="plane">ğŸ›«</div>
  <div class="stats" id="stats">Connecting...</div>

  <div class="bet-section">
    <div class="player">
      <h3>ğŸ‘¨â€âœˆï¸ Player A</h3>
      <div>Balance: $<span id="balA">1000</span></div>
      <input id="betA" type="number" placeholder="Enter bet" />
      <button onclick="placeBet('A')">Bet</button>
      <button onclick="cashout('A')">Cashout</button>
    </div>
    <div class="player">
      <h3>ğŸ§‘â€âœˆï¸ Player B</h3>
      <div>Balance: $<span id="balB">1000</span></div>
      <input id="betB" type="number" placeholder="Enter bet" />
      <button onclick="placeBet('B')">Bet</button>
      <button onclick="cashout('B')">Cashout</button>
    </div>
  </div>

  <h3>ğŸ“ˆ History</h3>
  <table>
    <thead>
      <tr><th>Round</th><th>Crash Point</th></tr>
    </thead>
    <tbody id="history"></tbody>
  </table>

  <script>
    const socket = new WebSocket("wss://" + window.location.host);
    const plane = document.getElementById("plane");
    const stats = document.getElementById("stats");
    const history = document.getElementById("history");
    let multiplier = 1.0;
    let balances = { A: 1000, B: 1000 };
    let interval;

    socket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.type === "flight") {
        multiplier = data.multiplier;
        stats.textContent = `ğŸ›« Plane flying... ${multiplier.toFixed(2)}x`;
        plane.style.transform = `translateY(${-multiplier * 10}px) rotate(${multiplier * 5}deg)`;
      } else if (data.type === "crash") {
        stats.textContent = `ğŸ’¥ Crashed at ${data.point.toFixed(2)}x`;
        plane.style.transform = "translateY(0px)";
        const row = document.createElement("tr");
        row.innerHTML = `<td>${data.round}</td><td>${data.point.toFixed(2)}x</td>`;
        history.prepend(row);
      }
    };

    function placeBet(player) {
      const input = document.getElementById(`bet${player}`);
      const amount = parseFloat(input.value);
      if (isNaN(amount) || amount <= 0) return alert("Enter valid bet");
      if (balances[player] < amount) return alert("Not enough balance");
      balances[player] -= amount;
      document.getElementById(`bal${player}`).textContent = balances[player];
      alert(`${player} placed $${amount} bet!`);
    }

    function cashout(player) {
      const win = (multiplier * 100).toFixed(2);
      balances[player] += parseFloat(win);
      document.getElementById(`bal${player}`).textContent = balances[player];
      alert(`${player} cashed out at ${multiplier.toFixed(2)}x and won $${win}`);
    }
  </script>
</body>
</html>
