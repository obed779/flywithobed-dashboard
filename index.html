<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FlyWithObed Aviator Dashboard</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: white;
      font-family: "Poppins", sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1 {
      margin-top: 20px;
      font-size: 28px;
      color: #00ffcc;
    }

    #multiplier {
      font-size: 64px;
      margin: 40px 0;
      color: #ffcc00;
      transition: all 0.2s ease-in-out;
    }

    .plane {
      font-size: 70px;
      animation: fly 2s infinite linear;
    }

    @keyframes fly {
      0% { transform: translateX(0); }
      100% { transform: translateX(100px); }
    }

    .crash {
      color: red;
      animation: shake 0.3s infinite;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }

    .balances {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 20px 0;
    }

    .balance-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
    }

    button {
      padding: 10px 20px;
      background-color: #00ffcc;
      border: none;
      border-radius: 8px;
      color: #0f2027;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }

    button:hover {
      background-color: #02d6b2;
    }

    #status {
      margin-top: 10px;
      color: #8ef;
    }
  </style>
</head>
<body>
  <h1>‚úàÔ∏è FlyWithObed Aviator Dashboard</h1>
  <div id="multiplier">1.00x</div>
  <div class="plane">üõ©Ô∏è</div>
  <div id="status">Connecting...</div>

  <div class="balances">
    <div class="balance-card">
      <h3>Player A</h3>
      <p id="balA">$5000</p>
      <button onclick="placeBet('playerA', 100)">üé≤ Bet $100</button>
      <button onclick="cashout('playerA')">üí∞ Cashout</button>
    </div>

    <div class="balance-card">
      <h3>Player B</h3>
      <p id="balB">$5000</p>
      <button onclick="placeBet('playerB', 100)">üé≤ Bet $100</button>
      <button onclick="cashout('playerB')">üí∞ Cashout</button>
    </div>
  </div>

  <script>
    const socket = io();

    const multiplierDisplay = document.getElementById("multiplier");
    const plane = document.querySelector(".plane");
    const statusEl = document.getElementById("status");

    let currentMultiplier = 1.0;
    let isCrashed = false;

    socket.on("connect", () => {
      statusEl.textContent = "‚úÖ Connected to Aviator server";
    });

    socket.on("aviator_status", (data) => {
      document.getElementById("balA").textContent = `$${data.balances.playerA}`;
      document.getElementById("balB").textContent = `$${data.balances.playerB}`;
    });

    socket.on("flight_update", (data) => {
      currentMultiplier = data.multiplier;
      multiplierDisplay.textContent = `${currentMultiplier}x`;
      if (!isCrashed) {
        plane.classList.remove("crash");
      }
    });

    socket.on("crash", (data) => {
      multiplierDisplay.textContent = `üí• ${data.crashPoint}x`;
      plane.classList.add("crash");
      isCrashed = true;
      setTimeout(() => {
        isCrashed = false;
      }, 3000);
    });

    socket.on("balance_update", (balances) => {
      document.getElementById("balA").textContent = `$${balances.playerA}`;
      document.getElementById("balB").textContent = `$${balances.playerB}`;
    });

    function placeBet(player, amount) {
      socket.emit("place_bet", { player, amount });
    }

    function cashout(player) {
      socket.emit("cashout", { player, multiplier: parseFloat(currentMultiplier) });
    }

    socket.on("bet_failed", (data) => {
      alert(data.message);
    });
  </script>
</body>
</html>


