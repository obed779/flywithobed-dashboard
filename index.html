<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
  const statusEl = document.getElementById("status");
  const historyBody = document.getElementById("historyBody");

  // ✅ Connect to your live backend
  const socket = io("https://obedaviator.onrender.com", {
    transports: ["websocket"],
    reconnection: true,
  });

  socket.on("connect", () => {
    statusEl.textContent = "✅ Connected to Aviator Live — Waiting for next round...";
  });

  socket.on("disconnect", () => {
    statusEl.textContent = "❌ Disconnected. Reconnecting...";
  });

  // ✅ Receive live flight updates
  socket.on("flight_update", (data) => {
    statusEl.textContent = `🛫 Plane flying... current multiplier: ${data.crashPoint}x`;
  });

  // ✅ Receive new round updates
  socket.on("new_round", (data) => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${data.round_id}</td><td>${data.result}x</td>`;
    historyBody.prepend(row);
    statusEl.textContent = `💥 Round ${data.round_id} crashed at ${data.result}x`;
  });

  // ✅ Receive status updates
  socket.on("aviator_status", (data) => {
    statusEl.textContent = `📡 Status: ${data.status}`;
  });
</script>


